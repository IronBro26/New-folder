<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>NEON SIGNUP PORTAL</title>

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Audiowide&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#000;
      --neon:#ff0033;
      --neon-soft: rgba(255,0,51,0.12);
      --glass: rgba(255,0,51,0.06);
      --accent: #ff5166;
    }
    html,body{height:100%;margin:0;background:var(--bg);color:var(--neon);font-family: 'Orbitron', sans-serif; -webkit-font-smoothing:antialiased;}
    .center{
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:24px;
      box-sizing:border-box;
      background:
        radial-gradient(circle at 10% 10%, rgba(255,0,51,0.03), transparent 6%),
        radial-gradient(circle at 90% 90%, rgba(255,0,51,0.02), transparent 8%),
        var(--bg);
    }

    /* Portal panel */
    .panel{
      width:980px;
      max-width:98%;
      border-radius:18px;
      padding:28px;
      box-sizing:border-box;
      background: linear-gradient(180deg, rgba(255,0,51,0.03), rgba(0,0,0,0.4));
      box-shadow: 0 0 40px rgba(255,0,51,0.08), inset 0 0 40px rgba(255,0,51,0.02);
      border: 1px solid rgba(255,0,51,0.12);
      position:relative;
      overflow:hidden;
      backdrop-filter: blur(2px);
    }

    /* Holographic title */
    .title{
      text-align:center;
      font-family: 'Audiowide', 'Orbitron', sans-serif;
      font-size:34px;
      letter-spacing:4px;
      color:var(--neon);
      text-shadow:
        0 0 12px rgba(255,0,51,0.9),
        0 0 30px rgba(255,0,51,0.5),
        0 0 60px rgba(255,0,51,0.2);
      margin:0 0 18px 0;
      animation: hologlitch 3.5s infinite;
    }
    @keyframes hologlitch{
      0%{text-shadow:0 0 6px rgba(255,0,51,0.8), 0 0 20px rgba(255,0,51,0.25);}
      50%{text-shadow:0 0 20px rgba(255,0,51,1), 0 0 50px rgba(255,0,51,0.4);}
      100%{text-shadow:0 0 6px rgba(255,0,51,0.8), 0 0 20px rgba(255,0,51,0.25);}
    }

    /* Top tabs */
    .tabs{
      display:flex;
      justify-content:center;
      gap:12px;
      margin-bottom:18px;
    }
    .tab{
      padding:10px 26px;
      border-radius:999px;
      cursor:pointer;
      border: 1px solid rgba(255,0,51,0.14);
      box-shadow: 0 0 18px rgba(255,0,51,0.08);
      transition: transform .25s ease-in-out, box-shadow .25s;
      position:relative;
      font-weight:700;
      background: linear-gradient(180deg, rgba(255,0,51,0.02), transparent);
    }
    .tab:hover{ transform:translateY(-3px); box-shadow: 0 0 30px rgba(255,0,51,0.18); }
    .tab.active{
      background: linear-gradient(90deg, rgba(255,0,51,0.06), rgba(255,0,51,0.02));
      box-shadow: 0 0 40px rgba(255,0,51,0.28), 0 6px 30px rgba(0,0,0,0.5);
    }

    /* Forms */
    .forms{
      display:flex;
      gap:24px;
      align-items:flex-start;
      justify-content:space-between;
      flex-wrap:wrap;
    }
    .card{
      flex:1 1 420px;
      min-width:320px;
      background: linear-gradient(180deg, rgba(255,0,51,0.02), rgba(0,0,0,0.25));
      border-radius:14px;
      padding:18px;
      box-sizing:border-box;
      border:1px solid rgba(255,0,51,0.08);
      box-shadow: 0 8px 30px rgba(0,0,0,0.6), 0 0 40px rgba(255,0,51,0.04);
      position:relative;
      transition: transform .3s ease;
    }
    .card:hover{ transform: translateY(-6px); }

    .card h3{
      margin:0 0 12px 0;
      font-size:18px;
      color:var(--neon);
      text-shadow: 0 0 10px rgba(255,0,51,0.6);
      letter-spacing:2px;
    }

    label{ display:block; font-size:12px; color:rgba(255,255,255,0.12); margin-bottom:6px; }
    input{
      width:100%;
      background:transparent;
      border:1px solid rgba(255,0,51,0.12);
      padding:12px 14px;
      border-radius:10px;
      color:var(--neon);
      outline:none;
      font-family:inherit;
      box-shadow: 0 6px 18px rgba(255,0,51,0.02), inset 0 0 20px rgba(255,0,51,0.01);
      transition: box-shadow .2s ease, border-color .2s ease;
    }
    input:focus{ border-color: rgba(255,0,51,0.6); box-shadow: 0 0 20px rgba(255,0,51,0.18); }

    .muted{ font-size:12px; color:rgba(255,255,255,0.08); margin-top:10px; }

    .btn{
      display:inline-block;
      margin-top:14px;
      padding:10px 18px;
      border-radius:999px;
      cursor:pointer;
      border: 1px solid rgba(255,0,51,0.16);
      background: linear-gradient(45deg, rgba(255,0,51,0.06), rgba(255,81,102,0.02));
      box-shadow: 0 6px 30px rgba(255,0,51,0.06), 0 0 24px rgba(255,0,51,0.08);
      color:var(--neon);
      font-weight:700;
      transition: transform .18s ease, box-shadow .18s;
      text-decoration:none;
    }
    .btn:hover{ transform:translateY(-3px); box-shadow: 0 10px 40px rgba(255,0,51,0.18); }

    .small{ font-size:13px; padding:8px 12px; }

    /* status box after login */
    .status-box{
      margin-top:16px;
      padding:12px;
      border-radius:10px;
      border:1px solid rgba(255,0,51,0.08);
      background: linear-gradient(180deg, rgba(255,0,51,0.02), rgba(0,0,0,0.32));
      box-shadow: 0 6px 30px rgba(0,0,0,0.6);
    }

    .link{
      display:inline-block;
      margin-left:10px;
      color:var(--neon);
      text-decoration:underline;
    }

    /* subtle flicker overlay */
    .flicker{
      position:absolute; inset:0; pointer-events:none;
      background-image: linear-gradient(90deg, rgba(255,0,51,0.02), rgba(255,0,51,0.0));
      mix-blend-mode:screen;
      animation: flick 4s infinite;
    }
    @keyframes flick{
      0%,100%{opacity:0.04;}
      50%{opacity:0.09;}
    }

    /* fade in/out sections */
    .hidden{ display:none; opacity:0; transform:translateY(6px); transition: all .35s ease; }
    .visible{ display:block; opacity:1; transform:none; transition: all .35s ease; }

    /* tiny footer */
    .footer{ text-align:center; margin-top:14px; color:rgba(255,255,255,0.06); font-size:12px; }

    /* small responsive */
    @media (max-width:720px){
      .forms{ flex-direction:column; }
      .title{ font-size:26px; }
    }

  </style>
</head>
<body>
  <div class="center">
    <div class="panel">
      <div class="title">NEON SIGNUP PORTAL</div>

      <div class="tabs">
        <div id="tabSignup" class="tab active">SIGN UP</div>
        <div id="tabLogin" class="tab">LOGIN</div>
      </div>

      <div class="forms">
        <!-- SIGN UP -->
        <div id="signupCard" class="card visible">
          <h3>New Recruit — Register</h3>
          <div>
            <label for="suEmail">Email</label>
            <input id="suEmail" type="email" placeholder="you@domain.com" />
          </div>
          <div style="margin-top:12px;">
            <label for="suPass">Passcode</label>
            <input id="suPass" type="password" placeholder="Enter passcode" />
          </div>
          <button id="doSignup" class="btn small">✦ Create Account</button>
          <div id="suMsg" class="muted"></div>
        </div>

        <!-- LOGIN -->
        <div id="loginCard" class="card hidden">
          <h3>Enter the Gate — Login</h3>
          <div>
            <label for="liEmail">Email</label>
            <input id="liEmail" type="email" placeholder="you@domain.com" />
          </div>
          <div style="margin-top:12px;">
            <label for="liPass">Passcode</label>
            <input id="liPass" type="password" placeholder="Enter passcode" />
          </div>
          <button id="doLogin" class="btn small">⮕ Login</button>

          <div id="loginStatus" class="status-box" style="display:none;">
            <div id="loginGreeting" style="font-weight:700;"></div>
            <div style="margin-top:8px;">
              <button id="btnLogout" class="btn small">Log Out</button>
              <a id="goSite" class="btn small" href="file:///C:/Users/Krfuc/OneDrive/Website/New%20folder/index.html" target="_blank">Go to Website</a>
              <button id="toAdmin" class="btn small" style="display:none;">Access Admin Panel</button>
            </div>
          </div>
        </div>
      </div>

      <div class="footer">Neon system • Smooth animations • Data synced to admin panel</div>

      <div class="flicker"></div>
    </div>
  </div>

<script>
  // Utilities
  const OWNER_EMAIL = "Krfuchs@icloud.com";

  function getUsers(){
    try { return JSON.parse(localStorage.getItem('NEON_USERS') || '[]'); }
    catch(e){ return []; }
  }
  function saveUsers(users){
    localStorage.setItem('NEON_USERS', JSON.stringify(users));
    // broadcast
    localStorage.setItem('NEON_USERS_LAST_MOD', Date.now());
  }

  // find user by email exact match
  function findUser(email){
    const users = getUsers();
    return users.find(u => u.email.toLowerCase() === (email||'').toLowerCase());
  }

  // toggle tabs
  const tabSignup = document.getElementById('tabSignup'), tabLogin = document.getElementById('tabLogin');
  const signupCard = document.getElementById('signupCard'), loginCard = document.getElementById('loginCard');

  tabSignup.addEventListener('click', ()=>{ activateTab('signup'); });
  tabLogin.addEventListener('click', ()=>{ activateTab('login'); });

  function activateTab(which){
    if(which==='signup'){
      tabSignup.classList.add('active'); tabLogin.classList.remove('active');
      signupCard.classList.remove('hidden'); signupCard.classList.add('visible');
      loginCard.classList.remove('visible'); loginCard.classList.add('hidden');
    } else {
      tabLogin.classList.add('active'); tabSignup.classList.remove('active');
      loginCard.classList.remove('hidden'); loginCard.classList.add('visible');
      signupCard.classList.remove('visible'); signupCard.classList.add('hidden');
    }
  }

  // Signup logic
  document.getElementById('doSignup').addEventListener('click', ()=>{
    const email = document.getElementById('suEmail').value.trim();
    const pass = document.getElementById('suPass').value;
    const msg = document.getElementById('suMsg');
    if(!email || !pass){ msg.textContent = "Enter both email and passcode."; return; }
    const users = getUsers();
    if(findUser(email)){ msg.textContent = "That email is already registered. Try logging in."; return; }

    const now = new Date();
    const user = {
      email,
      passcode: pass,
      signupTime: now.toLocaleString(),
      online: false,
      lastOnline: null
    };
    users.push(user);
    saveUsers(users);
    msg.textContent = `Registered ${email} — ${user.signupTime}`;
    // clear fields lightly
    document.getElementById('suEmail').value='';
    document.getElementById('suPass').value='';
  });

  // Login logic
  document.getElementById('doLogin').addEventListener('click', ()=>{
    const email = document.getElementById('liEmail').value.trim();
    const pass = document.getElementById('liPass').value;
    const greeting = document.getElementById('loginGreeting');
    if(!email || !pass){ alert('Enter both email and passcode.'); return; }
    const users = getUsers();
    let user = users.find(u => u.email.toLowerCase() === email.toLowerCase());
    if(!user){
      // Auto-register on login? No — prompt to sign up
      alert('No account found. Please sign up first.');
      activateTab('signup');
      return;
    }
    if(user.passcode !== pass){ alert('Passcode incorrect.'); return; }

    // Set session (sessionStorage) current user
    sessionStorage.setItem('NEON_CURRENT', JSON.stringify({ email: user.email }));

    // set user online
    user.online = true;
    saveUsers(users);

    // show status
    greeting.textContent = `Welcome, ${user.email} — Role: ${user.email.toLowerCase() === OWNER_EMAIL.toLowerCase() ? 'Owner' : 'Member'}`;
    document.getElementById('loginStatus').style.display = 'block';
    document.getElementById('liEmail').value=''; document.getElementById('liPass').value='';

    if(user.email.toLowerCase() === OWNER_EMAIL.toLowerCase()){
      document.getElementById('toAdmin').style.display='inline-block';
    } else {
      document.getElementById('toAdmin').style.display='none';
    }
    // store a per-tab flag so we can update lastOnline on unload
    window._NEON_LOGGED_IN = user.email;
    // notify others
    localStorage.setItem('NEON_STATUS_CHANGE', Date.now());
  });

  // Logout
  document.getElementById('btnLogout').addEventListener('click', doLogout);
  function doLogout(){
    const cur = sessionStorage.getItem('NEON_CURRENT');
    if(!cur){ location.reload(); return; }
    const email = JSON.parse(cur).email;
    // update users list
    const users = getUsers().map(u=>{
      if(u.email.toLowerCase() === email.toLowerCase()){
        u.online = false;
        u.lastOnline = new Date().toLocaleString();
      }
      return u;
    });
    saveUsers(users);
    // clear session
    sessionStorage.removeItem('NEON_CURRENT');
    window._NEON_LOGGED_IN = null;
    // redirect to login view
    activateTab('login');
    document.getElementById('loginStatus').style.display='none';
    alert('Logged out successfully.');
    localStorage.setItem('NEON_STATUS_CHANGE', Date.now());
  }

  // Admin access button
  document.getElementById('toAdmin').addEventListener('click', ()=>{
    // Owner can access admin.html
    window.location.href = 'admin.html';
  });

  // On page load, check if already logged in in this tab
  (function restoreSessionUI(){
    const cur = sessionStorage.getItem('NEON_CURRENT');
    if(cur){
      const email = JSON.parse(cur).email;
      document.getElementById('loginGreeting').textContent = `Welcome, ${email} — Role: ${email.toLowerCase() === OWNER_EMAIL.toLowerCase() ? 'Owner' : 'Member'}`;
      document.getElementById('loginStatus').style.display='block';
      if(email.toLowerCase() === OWNER_EMAIL.toLowerCase()) document.getElementById('toAdmin').style.display='inline-block';
      window._NEON_LOGGED_IN = email;
    }
  })();

  // update online status on unload (if tab closes)
  window.addEventListener('beforeunload', ()=>{
    const email = window._NEON_LOGGED_IN || (sessionStorage.getItem('NEON_CURRENT') && JSON.parse(sessionStorage.getItem('NEON_CURRENT')).email);
    if(email){
      const users = getUsers().map(u=>{
        if(u.email.toLowerCase() === email.toLowerCase()){
          u.online = false;
          u.lastOnline = new Date().toLocaleString();
        }
        return u;
      });
      saveUsers(users);
      localStorage.setItem('NEON_STATUS_CHANGE', Date.now());
    }
  });

  // Listen for storage changes to keep UI fresh across tabs
  window.addEventListener('storage', (e)=>{
    if(e.key === 'NEON_USERS_LAST_MOD' || e.key === 'NEON_STATUS_CHANGE'){
      // no heavy UI updates here, but could refresh messages
      // if current user set but admin was open in another tab it will update automatically there
    }
  });

  // helper to create demo owner if none exists (optional)
  (function ensureOwnerExists(){
    const users = getUsers();
    if(!users.some(u=>u.email.toLowerCase()===OWNER_EMAIL.toLowerCase())){
      // do not set passcode automatically, create placeholder owner with passcode "admin"
      users.push({
        email: OWNER_EMAIL,
        passcode: 'admin',
        signupTime: new Date().toLocaleString(),
        online: false,
        lastOnline: null
      });
      saveUsers(users);
    }
  })();

</script>
</body>
</html>
