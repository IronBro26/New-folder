<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>IronBro26 | Sign Up / Login</title>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js"></script>

  <style>
    body {
      background-color: #000;
      font-family: 'Orbitron', sans-serif;
      color: #ff1b1b;
      text-align: center;
      margin: 0;
      padding: 0;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      overflow: hidden;
    }

    h2 {
      font-size: 2.5em;
      text-shadow: 0 0 10px #ff1b1b, 0 0 20px #ff0000, 0 0 40px #ff1b1b;
      margin-bottom: 30px;
      animation: pulse 2s infinite;
    }

    input {
      background: #111;
      border: 2px solid #ff1b1b;
      border-radius: 8px;
      padding: 10px;
      color: #ff1b1b;
      font-size: 1.1em;
      width: 250px;
      outline: none;
      margin: 10px;
      box-shadow: 0 0 10px #ff0000;
      transition: 0.3s;
    }

    input:focus {
      box-shadow: 0 0 20px #ff1b1b, 0 0 40px #ff0000;
    }

    button {
      background: transparent;
      border: 2px solid #ff1b1b;
      border-radius: 10px;
      color: #ff1b1b;
      font-size: 1.1em;
      padding: 10px 20px;
      cursor: pointer;
      margin: 8px;
      transition: 0.3s;
      text-transform: uppercase;
      box-shadow: 0 0 10px #ff0000;
    }

    button:hover {
      background-color: #ff1b1b;
      color: black;
      box-shadow: 0 0 20px #ff1b1b, 0 0 40px #ff0000;
    }

    #userSection {
      display: none;
      text-shadow: 0 0 10px #ff0000;
    }

    #welcomeMessage {
      font-size: 1.3em;
      margin-bottom: 20px;
    }

    @keyframes pulse {
      0%, 100% { text-shadow: 0 0 10px #ff1b1b, 0 0 20px #ff0000; }
      50% { text-shadow: 0 0 30px #ff0000, 0 0 60px #ff1b1b; }
    }

    .neon-line {
      width: 100%;
      height: 2px;
      background: linear-gradient(90deg, transparent, #ff0000, transparent);
      animation: scan 3s linear infinite;
      position: absolute;
      top: 0;
    }

    @keyframes scan {
      0% { top: 0; }
      100% { top: 100%; }
    }
  </style>
</head>
<body>
  <div class="neon-line"></div>
  <h2>IronBro26 Secure Login</h2>

  <!-- Login/SignUp Form -->
  <div id="authSection">
    <input type="email" id="email" placeholder="Enter Email">
    <br>
    <input type="password" id="password" placeholder="Enter Password">
    <br>
    <button onclick="signUp()">Sign Up</button>
    <button onclick="login()">Login</button>
  </div>

  <!-- Logged-in User Section -->
  <div id="userSection">
    <h3 id="welcomeMessage"></h3>
    <button onclick="goToWebsite()">Go to Website</button>
    <button onclick="logout()">Log Out</button>
  </div>

  <script>
    // 🚀 Firebase config (yours)
    const firebaseConfig = {
      apiKey: "AIzaSyDTw5KYBkamqhvZsCVB9pqm2VTnEaRIdeM",
      authDomain: "ironbro26-ca6e8.firebaseapp.com",
      projectId: "ironbro26-ca6e8",
      storageBucket: "ironbro26-ca6e8.firebasestorage.app",
      messagingSenderId: "260134100377",
      appId: "1:260134100377:web:33d54f6d08d83178190708",
      measurementId: "G-17C00FNW0B"
    };

    const app = firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const db = firebase.firestore();

    const emailInput = document.getElementById('email');
    const passwordInput = document.getElementById('password');
    const authSection = document.getElementById('authSection');
    const userSection = document.getElementById('userSection');
    const welcomeMessage = document.getElementById('welcomeMessage');

    async function signUp() {
      const email = emailInput.value;
      const password = passwordInput.value;
      try {
        const userCred = await auth.createUserWithEmailAndPassword(email, password);
        await db.collection('users').doc(userCred.user.uid).set({
          email,
          lastLogin: new Date().toLocaleString(),
          online: true
        });
        alert('🎉 Signed up successfully!');
      } catch (err) {
        alert(err.message);
      }
    }

    async function login() {
      const email = emailInput.value;
      const password = passwordInput.value;
      try {
        const userCred = await auth.signInWithEmailAndPassword(email, password);
        await db.collection('users').doc(userCred.user.uid).update({
          lastLogin: new Date().toLocaleString(),
          online: true
        });
        alert('✅ Logged in successfully!');
      } catch (err) {
        alert(err.message);
      }
    }

    async function logout() {
      const user = auth.currentUser;
      if (user) {
        await db.collection('users').doc(user.uid).update({ online: false });
        await auth.signOut();
        alert('👋 Logged out successfully!');
      }
    }

    function goToWebsite() {
      // 🌐 Change to your real website page
      window.location.href = "https://yourwebsite.com";
    }

    auth.onAuthStateChanged(async user => {
      if (user) {
        authSection.style.display = "none";
        userSection.style.display = "block";
        welcomeMessage.textContent = `Welcome, ${user.email}!`;
        window.addEventListener('beforeunload', async () => {
          await db.collection('users').doc(user.uid).update({ online: false });
        });
      } else {
        authSection.style.display = "block";
        userSection.style.display = "none";
      }
    });
  </script>
</body>
</html>
