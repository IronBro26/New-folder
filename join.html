<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Bro Squad Signup</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800&display=swap" rel="stylesheet">
  <style>
    /* Base theme variables */
    :root {
      --bg: #0a0a0a;
      --bg2: #1a1a1a;
      --panel: #111;
      --text: #fff;
      --accent: #ff1a1a;
      --accent-light: #ff6666;
      --accent-dark: #660000;
      --transition-speed: 0.3s;
    }

    /* Theme class-based styles */
    .theme-yellow {
      --accent: #ffcc00 !important;
      --accent-light: #ffdd66 !important;
      --accent-dark: #cc9900 !important;
    }

    .theme-purple {
      --accent: #9c27b0 !important;
      --accent-light: #ba68c8 !important;
      --accent-dark: #6a1b9a !important;
    }

    .theme-skyblue {
      --accent: #00bcd4 !important;
      --accent-light: #4dd0e1 !important;
      --accent-dark: #008ba3 !important;
    }

    /* Apply smooth transitions */
    * {
      transition: background-color var(--transition-speed) ease,
                  color var(--transition-speed) ease,
                  border-color var(--transition-speed) ease,
                  box-shadow var(--transition-speed) ease;
    }

    body {
      font-family: 'Poppins', Arial, sans-serif;
      background: var(--bg);
      color: var(--text);
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
    }

    .container {
      background: var(--panel);
      padding: 40px;
      border-radius: 20px;
      box-shadow: 0 0 30px var(--accent);
      text-align: center;
      width: 420px;
    }

    h1 {
      color: var(--accent);
      text-shadow: 0 0 10px var(--accent);
      font-size: 22px;
      margin-bottom: 16px;
    }

    p {
      opacity: .85;
      margin-bottom: 16px;
    }

    input {
      padding: 12px;
      border-radius: 12px;
      border: none;
      margin-bottom: 12px;
      width: 100%;
      background: #222;
      color: var(--text);
    }

    button {
      padding: 12px 20px;
      margin-top: 8px;
      border-radius: 12px;
      border: none;
      background: var(--accent);
      color: #fff;
      font-weight: bold;
      cursor: pointer;
      transition: .3s;
      box-shadow: 0 0 10px var(--accent);
    }

    button:hover {
      background: var(--accent-light);
      box-shadow: 0 0 15px var(--accent);
    }

    #status {
      margin-top: 10px;
      color: var(--accent-light);
      font-weight: bold;
      min-height: 1.2em;
    }

    .home {
      margin-top: 8px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>üî• Join the Bro Squad üî•</h1>
    <p style="opacity:.85">Only $4.99/month ‚Äì exclusive premium videos, chance to be featured, and private chat.</p>
    <input type="email" id="email" placeholder="Enter your email" /><br />
    <button id="proceedBtn">‚û°Ô∏è Proceed</button>
    <div class="home">
      <button onclick="goHome()">üè† Home</button>
    </div>
    <p id="status"></p>
  </div>

  <script>
    // Theme Manager
    class SimpleThemeManager {
      constructor() {
        this.currentTheme = localStorage.getItem('theme') || 'brosquad-blue';
        this.themes = {
          'brosquad-red': { name: 'Red', accent: '#ff1a1a', light: '#ff6666', dark: '#660000' },
          'brosquad-blue': { name: 'Blue', accent: '#1a8cff', light: '#66b3ff', dark: '#0059b3' },
          'brosquad-gold': { name: 'Gold', accent: '#ffd700', light: '#ffea80', dark: '#b38f00' },
          'brosquad-neon': { name: 'Neon Green', accent: '#00ff9d', light: '#80ffce', dark: '#00b36b' },
          'brosquad-purple': { name: 'Purple', accent: '#b026ff', light: '#d580ff', dark: '#7a00cc' },
          'brosquad-cyan': { name: 'Cyan', accent: '#00f7ff', light: '#80fbff', dark: '#00b3b8' },
          'brosquad-orange': { name: 'Orange', accent: '#ff6b1a', light: '#ffa366', dark: '#cc5200' },
          'brosquad-pink': { name: 'Pink', accent: '#ff1a8c', light: '#ff80c1', dark: '#b3005c' }
        };
        this.init();
      }

      init() {
        this.applyTheme(this.currentTheme, 'init');
        this.setupCrossTabSync();
      }

      applyTheme(themeName, source = 'local') {
        const theme = this.themes[themeName] || this.themes['brosquad-blue'];
        const root = document.documentElement;
        
        root.setAttribute('data-theme', themeName);
        root.style.setProperty('--accent', theme.accent);
        root.style.setProperty('--accent-light', theme.light);
        root.style.setProperty('--accent-dark', theme.dark);

        if (source === 'local') {
          localStorage.setItem('theme', themeName);
          this.currentTheme = themeName;
        }
      }

      setupCrossTabSync() {
        window.addEventListener('storage', (e) => {
          if (e.key === 'theme' && e.newValue) {
            this.applyTheme(e.newValue, 'storage');
          }
        });
      }

      getCurrentTheme() {
        return this.currentTheme;
      }
    }

    // Initialize theme manager globally
    const themeManager = new SimpleThemeManager();

    // Bro Squad functionality
    const ownerEmail = "krfuchs11@icloud.com"; // free access for owner
    const paypalSubscriptionLink = "https://www.paypal.com/webapps/billing/subscriptions?plan_id=P-809957333S6794836NC2FUWY";

    document.getElementById("proceedBtn").addEventListener("click", proceed);
    document.getElementById("email").addEventListener("keydown", e=>{ if(e.key==="Enter") proceed(); });

    function proceed(){
      const email = (document.getElementById("email").value || "").trim().toLowerCase();
      const statusEl = document.getElementById("status");
      if(!email){ statusEl.innerText = "Enter a valid email!"; return; }

        if(email === "krfuchs11@icloud.com"){
          // Free access for owner: grant and add to members list
          localStorage.setItem("broAccess", "granted");
          localStorage.setItem("broEmail", email);

          try {
            const key = 'members';
            const existing = JSON.parse(localStorage.getItem(key) || '[]');
            const members = Array.isArray(existing) ? existing : [];
            // Add owner if missing
            if (!members.some(m => (m.email||'').toLowerCase() === email)) {
              members.push({ displayName: 'IronBro26', email: email, avatar: '', status: 'active' });
              localStorage.setItem(key, JSON.stringify(members));
            }
          } catch (e) { console.warn('Could not persist owner to members:', e); }

          window.location.href = "brosquad-new.html";
        } else {
          // For other users, mark pending and redirect to PayPal for subscription
          localStorage.setItem("pendingEmail", email);
          try {
            const key = 'members';
            const existing = JSON.parse(localStorage.getItem(key) || '[]');
            const members = Array.isArray(existing) ? existing : [];
            // Add or update pending member
            const idx = members.findIndex(m => (m.email||'').toLowerCase() === email);
            const entry = { displayName: email.split('@')[0], email: email, avatar: '', status: 'pending', pendingAt: Date.now() };
            if (idx === -1) members.push(entry); else members[idx] = { ...members[idx], ...entry };
            localStorage.setItem(key, JSON.stringify(members));
          } catch (e) { console.warn('Could not persist pending member:', e); }

          window.location.href = paypalSubscriptionLink;
        }
    }

    function goHome(){ window.location.href = "index.html"; }
  </script>
</body>
</html>
